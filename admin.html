<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ | –î—Ä—É–∂–±–∞ - –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="css/style-main.css">
    <link rel="stylesheet" href="css/style-catalog.css">
    <link rel="stylesheet" href="css/admin-products.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Admin Header Section -->
   <header class="header">
    <div class="container">
        <div class="header__inner">
            <a href="index.html" class="logo">
                <img src="img/logo.svg" alt="–î—Ä—É–∂–±–∞" class="logo__img">
                <span class="logo__text">–î–†–£–ñ–ë–ê</span>
            </a>
            
            <nav class="nav">
                <ul class="nav__list">
                    <li class="nav__item nav__item--dropdown">
                        <a href="catalog.html" class="nav__link">
                            <span class="nav__link-text">–ö–∞—Ç–∞–ª–æ–≥</span>
                            <span class="nav__link-arrow"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="dropdown-item"><a href="topupClothes.html" class="dropdown-link">–í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞</a></li>
                            <li class="dropdown-item"><a href="dresses.html" class="dropdown-link">–ü–ª–∞—Ç—å—è</a></li>
                            <li class="dropdown-item"><a href="pants.html" class="dropdown-link">–ë—Ä—é–∫–∏</a></li>
                            <li class="dropdown-item"><a href="t-shirts.html" class="dropdown-link">–§—É—Ç–±–æ–ª–∫–∏</a></li>
                            <li class="dropdown-item"><a href="accessories.html" class="dropdown-link">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</a></li>
                        </ul>
                    </li>
                    <li class="nav__item"><a href="deals.html" class="nav__link">–ê–∫—Ü–∏–∏</a></li>
                    <li class="nav__item"><a href="new.html" class="nav__link">–ù–æ–≤–∏–Ω–∫–∏</a></li>
                </ul>
            </nav>
            
            <div class="header__actions">
                <div class="auth-dropdown">
                    <button class="auth-btn" id="auth-btn">
                        <span class="auth-btn__icon">üë§</span>
                        <span class="auth-btn__text" id="auth-btn-text">–í–æ–π—Ç–∏</span>
                    </button>
                    <div class="auth-dropdown-menu" id="auth-dropdown">
                        <div class="auth-dropdown-content" id="auth-dropdown-content">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
                        </div>
                    </div>
                </div>
                <a href="cart.html" class="cart-btn-link">
                    <button class="cart-btn" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
                        <span class="cart-btn__icon">üõí</span>
                        <span class="cart-btn__count" id="cart-count">0</span>
                    </button>
                </a>
            </div>
        </div>
    </div>
    </header>

    <main class="admin-main">
        <section class="admin-controls">
            <div class="container">
                <h1 class="admin-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h1>
                
                <div class="admin-actions">
                    <button class="btn btn--primary" id="add-product-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
                    </button>
                    
                    <div class="admin-search">
                        <input type="text" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..." id="product-search">
                        <button class="search-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="currentColor" stroke-width="2"/>
                                <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="admin-content">
            <div class="container">
                <div class="products-table-wrapper">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞</th>
                                <th>–†–∞–∑–º–µ—Ä—ã</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="products-table-body">
                            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>
                
                <div class="admin-pagination">
                    <button class="pagination-btn pagination-btn--disabled">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        –ù–∞–∑–∞–¥
                    </button>
                    
                    <div class="pagination-pages">
                        <button class="page-btn page-btn--active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <span>...</span>
                        <button class="page-btn">8</button>
                    </div>
                    
                    <button class="pagination-btn">
                        –í–ø–µ—Ä–µ–¥
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            
            <form id="product-form" enctype="multipart/form-data">
                <input type="hidden" id="product-id">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="product-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞*</label>
                        <input type="text" id="product-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è*</label>
                        <select id="product-category" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                            <option value="coats">–í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞</option>
                            <option value="dresses">–ü–ª–∞—Ç—å—è</option>
                            <option value="pants">–ë—Ä—é–∫–∏</option>
                            <option value="tshirts">–§—É—Ç–±–æ–ª–∫–∏</option>
                            <option value="accessories">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="product-price">–¶–µ–Ω–∞ (‚ÇΩ)*</label>
                        <input type="number" id="product-price" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-old-price">–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ (‚ÇΩ)</label>
                        <input type="number" id="product-old-price" min="0">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>–†–∞–∑–º–µ—Ä—ã</label>
                    <div class="sizes-checkboxes">
                        <label><input type="checkbox" name="size" value="XS"> XS</label>
                        <label><input type="checkbox" name="size" value="S"> S</label>
                        <label><input type="checkbox" name="size" value="M"> M</label>
                        <label><input type="checkbox" name="size" value="L"> L</label>
                        <label><input type="checkbox" name="size" value="XL"> XL</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="product-description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="product-description" rows="4"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="product-image">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                    <input type="file" id="product-image" accept="image/*">
                    <div class="image-preview" id="image-preview"></div>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="product-is-new"> –ù–æ–≤–∏–Ω–∫–∞
                    </label>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn--primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn--text" id="modal-cancel">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div class="modal" id="confirm-modal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h3>
                <button class="modal-close" id="confirm-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?</p>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn--danger" id="confirm-delete">–£–¥–∞–ª–∏—Ç—å</button>
                <button class="btn btn--text" id="confirm-cancel">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞)
        let productsData = [
            { id: 1, name: "–®–µ—Ä—Å—Ç—è–Ω–æ–µ –ø–∞–ª—å—Ç–æ", category: "coats", size: ["S", "M", "L"], price: 10000, oldPrice: 12500, isNew: true, image: "img/Fashion wool coat -8.png" },
            { id: 2, name: "–î–∂–∏–Ω—Å—ã —Å –≤—ã—Å–æ–∫–æ–π —Ç–∞–ª–∏–µ–π", category: "pants", size: ["XS", "S", "M"], price: 4500, oldPrice: 6000, isNew: false, image: "img/Fashion wool coat -8.png" },
            { id: 3, name: "–ü–ª–∞—Ç—å–µ –º–∏–¥–∏", category: "dresses", size: ["S", "M"], price: 7000, oldPrice: 8500, isNew: true, image: "img/Fashion wool coat -8.png" },
            { id: 4, name: "–§—É—Ç–±–æ–ª–∫–∞ oversize", category: "tshirts", size: ["M", "L", "XL"], price: 2000, oldPrice: 3000, isNew: false, image: "img/Fashion wool coat -8.png" },
            { id: 5, name: "–ö–æ–∂–∞–Ω–∞—è –∫—É—Ä—Ç–∫–∞", category: "coats", size: ["M", "L"], price: 12000, oldPrice: 15000, isNew: false, image: "img/Fashion wool coat -8.png" },
            { id: 6, name: "–°–≤–∏—Ç—à–æ—Ç —Å –∫–∞–ø—é—à–æ–Ω–æ–º", category: "sweatshirts", size: ["S", "M", "L"], price: 3500, oldPrice: null, isNew: true, image: "img/Fashion wool coat -8.png" }
        ];

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const elements = {
            tableBody: document.getElementById('products-table-body'),
            addProductBtn: document.getElementById('add-product-btn'),
            productSearch: document.getElementById('product-search'),
            productModal: document.getElementById('product-modal'),
            confirmModal: document.getElementById('confirm-modal'),
            modalTitle: document.getElementById('modal-title'),
            productForm: document.getElementById('product-form'),
            logoutBtn: document.getElementById('logout-btn')
        };

        // –¢–µ–∫—É—â–∏–π —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π —Ç–æ–≤–∞—Ä
        let currentProductId = null;
        let productToDelete = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function initAdminProducts() {
            renderProductsTable();
            setupEventListeners();
        }

        // –†–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü—ã —Ç–æ–≤–∞—Ä–æ–≤
        function renderProductsTable(products = productsData) {
            elements.tableBody.innerHTML = products.map(product => `
                <tr>
                    <td>${product.id}</td>
                    <td>
                        <div class="product-image-cell">
                            <img src="${product.image}" alt="${product.name}" class="product-thumbnail">
                        </div>
                    </td>
                    <td>${product.name}</td>
                    <td>${getCategoryName(product.category)}</td>
                    <td>${product.price.toLocaleString()} ‚ÇΩ</td>
                    <td>${product.oldPrice ? product.oldPrice.toLocaleString() + ' ‚ÇΩ' : '-'}</td>
                    <td>${product.size.join(', ')}</td>
                    <td>
                        <span class="status-badge ${product.isNew ? 'status-new' : 'status-regular'}">
                            ${product.isNew ? '–ù–æ–≤–∏–Ω–∫–∞' : '–û–±—ã—á–Ω—ã–π'}
                        </span>
                    </td>
                    <td>
                        <button class="btn-icon edit-product" data-id="${product.id}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                        <button class="btn-icon delete-product" data-id="${product.id}">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –∫–ª—é—á—É
        function getCategoryName(categoryKey) {
            const categories = {
                'coats': '–í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞',
                'dresses': '–ü–ª–∞—Ç—å—è',
                'pants': '–ë—Ä—é–∫–∏',
                'tshirts': '–§—É—Ç–±–æ–ª–∫–∏',
                'accessories': '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã',
                'sweatshirts': '–°–≤–∏—Ç—à–æ—Ç—ã'
            };
            return categories[categoryKey] || categoryKey;
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
            elements.addProductBtn.addEventListener('click', openAddProductModal);
            
            // –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
            elements.productSearch.addEventListener('input', handleSearch);
            
            // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
            document.addEventListener('click', function(e) {
                if (e.target.closest('.edit-product')) {
                    const productId = parseInt(e.target.closest('.edit-product').dataset.id);
                    openEditProductModal(productId);
                }
            });
            
            // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
            document.addEventListener('click', function(e) {
                if (e.target.closest('.delete-product')) {
                    const productId = parseInt(e.target.closest('.delete-product').dataset.id);
                    openConfirmDeleteModal(productId);
                }
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.getElementById('modal-close').addEventListener('click', closeProductModal);
            document.getElementById('modal-cancel').addEventListener('click', closeProductModal);
            document.getElementById('confirm-close').addEventListener('click', closeConfirmModal);
            document.getElementById('confirm-cancel').addEventListener('click', closeConfirmModal);
            
            // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
            document.getElementById('confirm-delete').addEventListener('click', deleteProduct);
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã —Ç–æ–≤–∞—Ä–∞
            elements.productForm.addEventListener('submit', handleProductFormSubmit);
            
            // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
            elements.logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                if (confirm('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                    window.location.href = 'login.html';
                }
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
            window.addEventListener('click', function(e) {
                if (e.target === elements.productModal) {
                    closeProductModal();
                }
                if (e.target === elements.confirmModal) {
                    closeConfirmModal();
                }
            });
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
        function openAddProductModal() {
            currentProductId = null;
            elements.modalTitle.textContent = '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä';
            elements.productForm.reset();
            document.getElementById('image-preview').innerHTML = '';
            elements.productModal.style.display = 'block';
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
        function openEditProductModal(productId) {
            const product = productsData.find(p => p.id === productId);
            if (!product) return;
            
            currentProductId = productId;
            elements.modalTitle.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä';
            
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –¥–∞–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞
            document.getElementById('product-id').value = product.id;
            document.getElementById('product-name').value = product.name;
            document.getElementById('product-category').value = product.category;
            document.getElementById('product-price').value = product.price;
            document.getElementById('product-old-price').value = product.oldPrice || '';
            document.getElementById('product-description').value = product.description || '';
            document.getElementById('product-is-new').checked = product.isNew;
            
            // –°–±—Ä–æ—Å –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
            document.querySelectorAll('input[name="size"]').forEach(checkbox => {
                checkbox.checked = product.size.includes(checkbox.value);
            });
            
            // –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const imagePreview = document.getElementById('image-preview');
            imagePreview.innerHTML = '';
            if (product.image) {
                const img = document.createElement('img');
                img.src = product.image;
                img.alt = product.name;
                img.className = 'image-preview-img';
                imagePreview.appendChild(img);
            }
            
            elements.productModal.style.display = 'block';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–æ–≤–∞—Ä–∞
        function closeProductModal() {
            elements.productModal.style.display = 'none';
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
        function openConfirmDeleteModal(productId) {
            productToDelete = productId;
            elements.confirmModal.style.display = 'block';
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        function closeConfirmModal() {
            elements.confirmModal.style.display = 'none';
            productToDelete = null;
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
        function deleteProduct() {
            if (!productToDelete) return;
            
            productsData = productsData.filter(p => p.id !== productToDelete);
            renderProductsTable();
            closeConfirmModal();
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
            alert('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∏—Å–∫–∞
        function handleSearch() {
            const searchTerm = elements.productSearch.value.toLowerCase();
            if (!searchTerm) {
                renderProductsTable();
                return;
            }
            
            const filteredProducts = productsData.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                product.category.toLowerCase().includes(searchTerm) ||
                product.id.toString().includes(searchTerm)
            );
            
            renderProductsTable(filteredProducts);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã —Ç–æ–≤–∞—Ä–∞
        function handleProductFormSubmit(e) {
            e.preventDefault();
            
            // –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
            const formData = {
                id: currentProductId || generateNextId(),
                name: document.getElementById('product-name').value,
                category: document.getElementById('product-category').value,
                price: parseInt(document.getElementById('product-price').value),
                oldPrice: document.getElementById('product-old-price').value ? 
                    parseInt(document.getElementById('product-old-price').value) : null,
                description: document.getElementById('product-description').value,
                isNew: document.getElementById('product-is-new').checked,
                size: Array.from(document.querySelectorAll('input[name="size"]:checked')).map(cb => cb.value),
                image: document.getElementById('image-preview').querySelector('img')?.src || 
                    (currentProductId ? productsData.find(p => p.id === currentProductId)?.image : 'img/default-product.jpg')
            };
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
            if (currentProductId) {
                // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞
                const index = productsData.findIndex(p => p.id === currentProductId);
                if (index !== -1) {
                    productsData[index] = formData;
                }
            } else {
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
                productsData.push(formData);
            }
            
            renderProductsTable();
            closeProductModal();
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
            alert(`–¢–æ–≤–∞—Ä "${formData.name}" —É—Å–ø–µ—à–Ω–æ ${currentProductId ? '–æ–±–Ω–æ–≤–ª–µ–Ω' : '–¥–æ–±–∞–≤–ª–µ–Ω'}!`);
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
        function generateNextId() {
            return productsData.length > 0 ? 
                Math.max(...productsData.map(p => p.id)) + 1 : 1;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', initAdminProducts);
    </script>
    <script src="js/admin-products.js"></script>
</body>
</html>